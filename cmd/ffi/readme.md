# Phantom Mobile FFI Library

## Описание

Этот модуль компилирует ядро `phantomcore` в нативную библиотеку, которую можно встроить в мобильные приложения для iOS и Android. Он предоставляет Foreign Function Interface (FFI), позволяя вызывать Go-функции из Swift/Objective-C (на iOS) и Kotlin/Java (на Android).

Это не самостоятельное приложение, а строительный блок для создания полноценных мобильных клиентов.

## Ключевые возможности

-   **Кроссплатформенность:** Одна и та же кодовая база `phantomcore` работает на обеих мобильных платформах.
-   **Нативная производительность:** Вся криптография и сетевая логика выполняются как скомпилированный нативный код.
-   **Экспорт функций:** Предоставляет C-совместимые функции (например, `StartCore`, `SendMessage`, `GetContacts`) для вызова из нативного кода.
-   **Асинхронность:** Поддерживает колбэки для обработки асинхронных событий (например, получение нового сообщения) в нативном UI.

## Сборка

Для сборки требуется установленный `gomobile`.

**Для iOS (создание `.xcframework`):**

```bash
# Создает универсальный фреймворк для симулятора и реальных устройств
gomobile bind -target=ios -o PhantomCore.xcframework phantom/cmd/phantom_mobile
```
*Замените `phantom/cmd/phantom_mobile` на правильный путь к вашему пакету.*

**Для Android (создание `.aar` архива):**

```bash
gomobile bind -target=android -o phantomcore.aar phantom/cmd/phantom_mobile
```

## Использование

Сгенерированные артефакты (`.xcframework` или `.aar`) импортируются в ваш проект в Xcode или Android Studio.

**Пример вызова из Swift (iOS):**

```swift
import PhantomCore

// Инициализация и запуск ядра
PhantomCoreStartCore("mobile_user", "1234", dataPath)

// Отправка сообщения
PhantomCoreSendMessage("PEER_HASH", "Hello from iOS!")
```

## Архитектура

Мобильный `main.go` использует `cgo` для экспорта функций с директивой `//export`. Все сложные типы данных (структуры, списки) передаются в виде JSON-строк или Protobuf-сообщений для упрощения взаимодействия между Go и нативными языками.

## Для кого это?

-   **Мобильные разработчики:** Для создания официальных или сторонних клиентов Phantom для App Store и Google Play.